<%- layout('layouts/boilerplate') %>
<link rel="stylesheet" href="/styles/image-style.css" />

<div class="row align-items-end g-2">
  <% for(let building of buildings) {%>
  <div class="col-md-3">
    <div class="card">
      <img
        src="<% if(building.images[0]){ %>
            <%= building.images[0].slice(6) %>
        <%  }else {%>
            <%=  '/images/tau.png' %>
            <% } %>"
        class="card-img-top fit"
        alt="picture of a building"
      />
      <div class="card-body">
        <h5 class="card-title"><%= building.name %></h5>
        <h6 class="card-subtitle mb-2 text-muted">
          <%= building.typologies.reduce((a,c)=> {a + ", " + c}) %>
        </h6>
        <div class="card-text"><%= building.description || 'no description available...' %></div>
        <div class="row mb-3">
          <div class="col">
            <ul class="list-group list-group-flush">
              <li class="list-group-item">Floor count: <b><%= building.floorCount ? building.floorCount.toLocaleString('en-US') : ''  %> </b></li>
              <li class="list-group-item">Floor Area: <b><%= building.floorArea ? building.floorArea.toLocaleString('en-US') : ''    %> m<sup>2</sup></b> </li>
              <li class="list-group-item">Footprint Area: <b><%= building.footprintArea ? building.footprintArea.toLocaleString('en-US') : ''   %> m<sup>2</sup></b> </li>
            </ul>
          </div>
          <div class="col">
            <ul class="list-group list-group-flush">
                <li class="list-group-item"> Capacity: <b><%= building.capacity  ? building.capacity.toLocaleString('en-US') : ''  %> </b></li>
                <li class="list-group-item"> Actual users: <b><%= building.userCount ? building.userCount.toLocaleString('en-US') : ''   %> </b></li>
                <li class="list-group-item"> Asset Value: <b><%= building.assetValue ? 'P' + building.assetValue.toLocaleString('en-US') : ''   %> </b></li>
              </ul>
          </div>
        </div>
        <a href="/buildings/<%= building._id %>" class="btn btn-success d-block"
          >Full details</a
        >
      </div>
    </div>
  </div>

  <% } %>
</div>
